#include <iostream>      // ??????/????? ????????
#include <string>        // ??????? ?? ??????
#include <vector>        // ???????? vector ????? ?? ?????? ?????
#include <algorithm>     // ???????? std::sort

using namespace std;

// ===== 1. ????? ???? (struct) ?????? =====
struct Student {
    string firstName;
    string lastName;
    float math;
    float english;
    float science;

    // ???? ????? ??????? ?????
    float totalMarks() const {
        return math + english + science;
    }

    // ???? ????? ???????
    float average() const {
        return totalMarks() / 3;
    }

    // ???? ?????? ????? ??????
    string fullName() const {
        return firstName + " " + lastName;
    }
};

// ===== 2. ???? ?????? ?????? ?????? =====
void printStudent(const Student& s) {
    cout << "Name: " << s.fullName() << endl;
    cout << "Math: " << s.math
        << ", English: " << s.english
        << ", Science: " << s.science << endl;
    cout << "Total Marks: " << s.totalMarks() << endl;
    cout << "Average: " << s.average() << endl;
    cout << "---------------------------" << endl;
}

// ===== 3. ???? ?????? ???? ????? ???? ??? 0 ? 100 =====
float readMark(const string& subject) {
    float mark;
    while (true) {
        cout << subject << " marks (0 - 100): ";
        cin >> mark;
        if (mark >= 0 && mark <= 100)
            break;  // ?????
        else
            cout << "? Invalid! Please enter a value between 0 and 100.\n";
    }
    return mark;
}

// ===== 4. ?????? ???????? =====
int main() {
    int n;
    cout << "How many students do you want to enter? ";
    cin >> n;

    vector<Student> students(n);  // ????? ????? ???? ?????? n

    // 4.1 ????? ?????? ??????
    for (int i = 0; i < n; i++) {
        cout << "\nEnter data for student #" << i + 1 << ":\n";
        cout << "First name: ";
        cin >> students[i].firstName;
        cout << "Last name: ";
        cin >> students[i].lastName;

        // ????? ??????? ?? ??????
        students[i].math = readMark("Math");
        students[i].english = readMark("English");
        students[i].science = readMark("Science");
    }

    // 4.2 ????? ?????? ??? ??????? ?? ?????? ?????
    sort(students.begin(), students.end(), [](const Student& a, const Student& b) {
        return a.totalMarks() > b.totalMarks();  // ????? ??????
        });

    // 4.3 ??? ?????? ?????? ??? ???????
    cout << "\n?? Students sorted by total marks (highest to lowest):\n";
    for (int i = 0; i < n; i++) {
        cout << "Rank #" << i + 1 << ":\n";
        printStudent(students[i]);
    }

    return 0;
}
